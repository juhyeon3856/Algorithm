# [Platinum IV] Erasing Matrix - 16711 

[문제 링크](https://www.acmicpc.net/problem/16711) 

### 성능 요약

메모리: 188168 KB, 시간: 420 ms

### 분류

애드 혹, 해 구성하기, 불변량 찾기

### 제출 일자

2025년 8월 28일 20:16:48

### 문제 설명

<p>규민이는 각 칸에 음이 아닌 정수가 적힌 <em>N</em> x <em>M</em> 격자를 하나 가지고 있다. </p>

<p>이제 규민이는 각 칸에 적힌 정수들을 모두 0으로 만들고자 하고, 이를 위해 규민이는 다음과 같은 시행을 할 수 있다. </p>

<ul>
	<li>시행: 격자에서 인접한 두 칸을 선택하고, 정수 <em>k</em>를 선택한다. 인접한 두 칸에 적힌 수에 <em>k</em>를 더한다.</li>
</ul>

<p>단, 시행 이후에도 격자에 적힌 모든 수는 항상 음이 아닌 정수이도록 한다. 또한, 두 칸이 '인접하다'는 것은, 두 칸이 서로 변을 하나 공유하고 있다는 뜻이다. </p>

<p>규민이가 가지고 있는 <em>N</em> x <em>M</em> 격자에 대한 정보가 주어졌을 때, 규민이가 시행을 통해 목표를 달성할 수 있는지 판별하자.</p>

### 입력 

 <p>첫째 줄에 격자의 세로 길이 <em>N</em>과 가로 길이 <em>M</em>이 주어진다. (2 ≤ <em>N, M</em> ≤ 500)</p>

<p>둘째 줄부터 <em>N+1</em>번째 줄까지, 규민이가 가지고 있는 격자에 적혀 있는 수들이 한 줄에 <em>M</em>개씩 주어진다.</p>

<p>주어지는 각 정수는 음이 아닌 정수로, 10<sup>6</sup> 이하인 정수이다. </p>

### 출력 

 <p>만약 규민이가 목표를 달성할 수 없다면, -1을 출력한다. </p>

<p>규민이가 목표를 달성할 수 있다면, 규민이가 목표를 달성할 수 있는 방법을 아래에 주어진 형식으로 출력한다.</p>

<p>첫째 줄에는 규민이의 시행 횟수 <em>X</em>를 출력한다. 단, 0 ≤ <em>X</em> ≤ 10<sup>6</sup>를 만족해야 한다.</p>

<p>둘째 줄부터 <em>X+1</em>번째 줄에는, <em>i</em>번째 줄에 규민이가 실행하는 <em>i-1</em>번째 시행에 대한 정보를 <em>r<sub>1</sub> c<sub>1</sub> r<sub>2</sub> c<sub>2</sub> k</em> 형식으로 출력한다.</p>

<p>여기서 (<em>r<sub>1</sub>, c<sub>1</sub></em>)과 (<em>r<sub>2</sub>, c<sub>2</sub></em>)는 규민이가 선택한 인접한 두 칸의 좌표이고, 1 ≤ <em>r<sub>1</sub>, r<sub>2</sub></em> ≤ <em>N</em>과 1 ≤ <em>c<sub>1</sub>, c<sub>2</sub></em> ≤ <em>M</em>, 그리고 |<em>r<sub>1</sub>-r<sub>2</sub></em>|+|<em>c<sub>1</sub>-c<sub>2</sub></em>|=1을 만족한다.</p>

<p>또한, <em>k</em>는 규민이가 시행을 통해 두 칸에 적힌 수에 더할 정수로, -10<sup>12</sup> ≤ <em>k</em> ≤ 10<sup>12</sup>가 성립해야 한다. </p>

<p>규민이의 시행 횟수를 최소화할 필요는 없음에 주의하라. </p>

<p>또한, 규민이가 목표를 달성할 수 있다면, 주어진 출력 조건을 만족하는 방법으로 목표를 달성할 수 있음이 보장된다. </p>

